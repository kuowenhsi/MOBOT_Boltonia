getwd()
library(tidyverse)
setwd("/Users/kuowenhsi/Library/CloudStorage/OneDrive-WashingtonUniversityinSt.Louis/MOBOT/MOBOT_Boltonia")
correct_stem <- function(x){
stem_present <- FALSE
output <- as.vector(rep(NA, length(x)), mode = "numeric")
for (i in 1:length(x)){
if (stem_present == FALSE){
if (is.na(x[[i]])){
stem_present <- FALSE
} else{
stem_present <- TRUE
output[[i]] <- x[[i]]
}
} else{
if (is.na(x[[i]])) {
stem_present <- FALSE
output[1:i] <- as.numeric(rep(NA, i))
} else{
stem_present <- TRUE
output[[i]] <- x[[i]]
}
}
}
return(output)
}
list.files()
boltonia_data <- read_csv("./data/Boltonia Phenotype data_20240612.csv", na = c("", "NA", "N/A", "DNR"))
str(boltonia_data)
boltonia_data$flwrBud.1
p <- ggplot(data = boltonia_data, mapping = aes(x = label, y = stemLength.1))+
geom_col(mapping = aes(fill = stemLength.1))+
scale_fill_distiller(palette = "RdYlBu")
p
boltonia_data_sub <- boltonia_data %>%
filter(index <= 10) %>%
mutate(stemLength.2 = as.numeric(stemLength.2), label = factor(label, levels = label))
View(boltonia_data_sub)
str(boltonia_data_sub)
?as.logical
boltonia_data_sub <- boltonia_data %>%
filter(index <= 10) %>%
mutate(stemLength.2 = as.numeric(stemLength.2), label = factor(label, levels = label))%>%
mutate(Surv.2 = case_when(Surv.2 == "Y" ~ TRUE, TRUE ~ FALSE))
str(boltonia_data_sub)
as.logical(0)
as.logical(1)
tibble(X = 1, y = 1:10)
tibble(X = 1:12, y = 1:10)
as.integer(1)
as.integer(1.1231)
as.double(12.124124)
convert_Y_TRUE <- function(x){
output <- case_when(x == "Y" ~ TRUE, TRUE ~ FALSE)
return(output)
}
boltonia_data_sub <- boltonia_data %>%
filter(index <= 10) %>%
mutate(stemLength.2 = as.numeric(stemLength.2), label = factor(label, levels = label))%>%
# mutate(Surv.2 = case_when(Surv.2 == "Y" ~ TRUE, TRUE ~ FALSE))%>%
mutate_at(vars(matches("Surv.")), .funs = "convert_Y_TRUE")
str(boltonia_data_sub)
